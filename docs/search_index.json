[["index.html", "A Minimal Book Example Chapter 1 Prerequisites", " A Minimal Book Example Yihui Xie 2021-10-06 Chapter 1 Prerequisites This is a sample book written in Markdown. You can use anything that Pandoc’s Markdown supports, e.g., a math equation \\(a^2 + b^2 = c^2\\). The bookdown package can be installed from CRAN or Github: install.packages(&quot;bookdown&quot;) # or the development version # devtools::install_github(&quot;rstudio/bookdown&quot;) Remember each Rmd file contains one and only one chapter, and a chapter is defined by the first-level heading #. To compile this example to PDF, you need XeLaTeX. You are recommended to install TinyTeX (which includes XeLaTeX): https://yihui.org/tinytex/. "],["intro.html", "Chapter 2 Introduction", " Chapter 2 Introduction You can label chapter and section titles using {#label} after them, e.g., we can reference Chapter 2. If you do not manually label them, there will be automatic labels anyway, e.g., Chapter ??. Figures and tables with captions will be placed in figure and table environments, respectively. par(mar = c(4, 4, .1, .1)) plot(pressure, type = &#39;b&#39;, pch = 19) Figure 2.1: Here is a nice figure! Reference a figure by its code chunk label with the fig: prefix, e.g., see Figure 2.1. Similarly, you can reference tables generated from knitr::kable(), e.g., see Table 2.1. knitr::kable( head(iris, 20), caption = &#39;Here is a nice table!&#39;, booktabs = TRUE ) Table 2.1: Here is a nice table! Sepal.Length Sepal.Width Petal.Length Petal.Width Species 5.1 3.5 1.4 0.2 setosa 4.9 3.0 1.4 0.2 setosa 4.7 3.2 1.3 0.2 setosa 4.6 3.1 1.5 0.2 setosa 5.0 3.6 1.4 0.2 setosa 5.4 3.9 1.7 0.4 setosa 4.6 3.4 1.4 0.3 setosa 5.0 3.4 1.5 0.2 setosa 4.4 2.9 1.4 0.2 setosa 4.9 3.1 1.5 0.1 setosa 5.4 3.7 1.5 0.2 setosa 4.8 3.4 1.6 0.2 setosa 4.8 3.0 1.4 0.1 setosa 4.3 3.0 1.1 0.1 setosa 5.8 4.0 1.2 0.2 setosa 5.7 4.4 1.5 0.4 setosa 5.4 3.9 1.3 0.4 setosa 5.1 3.5 1.4 0.3 setosa 5.7 3.8 1.7 0.3 setosa 5.1 3.8 1.5 0.3 setosa You can write citations, too. For example, we are using the bookdown package (Xie 2021) in this sample book, which was built on top of R Markdown and knitr (Xie 2015). References "],["operaciones-vectoriales.html", "Chapter 3 Operaciones Vectoriales 3.1 Dividir una capa vectorial en múltiples partes", " Chapter 3 Operaciones Vectoriales 3.1 Dividir una capa vectorial en múltiples partes Supongamos que tenemos una capa vectorial que contiene varios polígonos, correspondientes cada uno de ellos a un registro en la tabla de atributos. Puede que nos interese generar una capa vectorial para cada uno de éstos polígonos. melojar &lt;- st_read(&quot;data/spatial/melojo_sn.shp&quot;) ## Reading layer `melojo_sn&#39; from data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_sn.shp&#39; ## using driver `ESRI Shapefile&#39; ## Simple feature collection with 8 features and 9 fields ## Geometry type: MULTIPOLYGON ## Dimension: XY ## Bounding box: xmin: -3.491262 ymin: 36.93801 xmax: -3.240845 ymax: 37.19202 ## Geodetic CRS: WGS 84 mapview::mapview(melojar) Como vemos, esta capa de distribución del roble melojo en Sierra Nevada, contiene 8 polígonos correspondientes a las 8 poblaciones. ## POBLACION LOCALIDAD VALLE ## 1 1 El Camarate Rio Alhama ## 2 2 Loma del Muerto Rio Genil ## 3 3 Loma de la Perdiz Rio Monachil ## 4 4 Puntal de los Mecheros Rio Dilar ## 5 5 Loma de Enmedio Rio Durcal ## 6 6 El Robledal de Ca�ar Rio Chico ## 7 7 Loma de las Matanzas y Loma de Ram�n Rio Poqueira ## 8 8 Loma de los Lores Rio Trevelez ## MUNICIPIO AREA PERIMETER area_nueva loc ## 1 Lugros 4571542 51340.36 4571542 CAM ## 2 Guejar-Sierra 3949952 36876.64 3949952 GEN ## 3 Monachil 2045501 23749.19 2045501 MON ## 4 Dilar 1540713 11224.94 1540713 DIL ## 5 Durcal 1370360 25697.09 1370360 DUR ## 6 Ca�ar 4362011 57760.57 4362011 CAN ## 7 Soportujar, Pampaneira, Bubion, Capileira 4589490 54936.91 4589490 POQ ## 8 Portugos, Busquistar 1979151 31754.34 1979151 TRE ## cluster ## 1 N ## 2 NW ## 3 NW ## 4 NW ## 5 NW ## 6 S ## 7 S ## 8 S Nuestro objetivo ahora es generar tantas capas vectoriales como polígonos. Para ello, usamos esta pequeña función que hemos escrito1. splitByAttributes &lt;- function(spatialdata, codename, dsn){ codenames &lt;- unique(spatialdata[[codename]]) for (i in 1:length(codenames)) { tmp &lt;- spatialdata[spatialdata[[codename]] == codenames[i], ] sf::st_write(obj = tmp, paste0(dsn, &quot;/&quot;, codenames[i], &quot;.shp&quot;), append=FALSE, quiet=FALSE) } } La función splitByAttributes tiene los siguientes argumentos: spatialdata que indica la capa vectorial a dividir; codename es el atributo por el cual vamos a generar cada uno de los polígonos; y dsn que indica la carpeta de salida. Supongamos que para nuestra capa queremos generar un polígono para cada población de roble melojo en Sierra Nevada, es decir, el atributo por el que queremos dividir nuestra capa es loc. carpeta_destino &lt;- here::here(&quot;data/spatial/melojo_pobs&quot;) splitByAttributes(melojar, codename = &quot;loc&quot;, dsn = carpeta_destino) ## Deleting layer `CAM&#39; using driver `ESRI Shapefile&#39; ## Writing layer `CAM&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/CAM.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Deleting layer `GEN&#39; using driver `ESRI Shapefile&#39; ## Writing layer `GEN&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/GEN.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Deleting layer `MON&#39; using driver `ESRI Shapefile&#39; ## Writing layer `MON&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/MON.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Deleting layer `DIL&#39; using driver `ESRI Shapefile&#39; ## Writing layer `DIL&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/DIL.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Deleting layer `DUR&#39; using driver `ESRI Shapefile&#39; ## Writing layer `DUR&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/DUR.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Deleting layer `CAN&#39; using driver `ESRI Shapefile&#39; ## Writing layer `CAN&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/CAN.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Warning in CPL_write_ogr(obj, dsn, layer, driver, ## as.character(dataset_options), : GDAL Message 1: One or several characters ## couldn&#39;t be converted correctly from UTF-8 to ISO-8859-1. This warning will not ## be emitted anymore. ## Deleting layer `POQ&#39; using driver `ESRI Shapefile&#39; ## Writing layer `POQ&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/POQ.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. ## Warning in CPL_write_ogr(obj, dsn, layer, driver, ## as.character(dataset_options), : GDAL Message 1: One or several characters ## couldn&#39;t be converted correctly from UTF-8 to ISO-8859-1. This warning will not ## be emitted anymore. ## Deleting layer `TRE&#39; using driver `ESRI Shapefile&#39; ## Writing layer `TRE&#39; to data source ## `/Users/ajpelu/Google Drive/MS/books/gisR/data/spatial/melojo_pobs/TRE.shp&#39; using driver `ESRI Shapefile&#39; ## Writing 1 features with 9 fields and geometry type Multi Polygon. Si exploramos la carpeta de destino (i.e. data/spatial/melojo_pobs) podemos observar que se han creado 8 capas vectoriales con el nombre de cada una de las localidades. list.files(carpeta_destino, pattern = &quot;.shp&quot;) ## [1] &quot;CAM.shp&quot; &quot;CAN.shp&quot; &quot;DIL.shp&quot; &quot;DUR.shp&quot; &quot;GEN.shp&quot; &quot;MON.shp&quot; &quot;POQ.shp&quot; ## [8] &quot;TRE.shp&quot; Modificada a partir de https://gis.stackexchange.com/questions/347927/r-equivalent-of-arcmap-split-by-attributes↩︎ "],["references.html", "References", " References "]]
